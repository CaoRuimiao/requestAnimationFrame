<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>requestAnimationFrame</title>
    <style>
        #test{width:0px;height:17px;background: #00ff00;}
    </style>
</head>
<body>
    <div id="test">0%</div>
    <input type="button" value="Run" id="run"/>
    <script>
        window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame ||window.webkitRequestAnimationFrame ||window.msRequestAnimationFrame;
        var start=null;
        var ele=document.getElementById("test");
        var progress=0;
        function step(timestamp){
            progress+=1;
            ele.style.width=progress+"%";
            ele.innerHTML=progress+"%";
            if(progress<100){
                requestAnimationFrame(step);
            }
        }
        requestAnimationFrame(step);
        document.getElementById("run").addEventListener("click",function(){
            ele.style.width="0";
            progress=0;
            requestAnimationFrame(step);
        },false);

    </script>
</body>
</html>